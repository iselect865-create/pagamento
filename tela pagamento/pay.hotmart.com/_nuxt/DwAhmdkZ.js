import{t as C,x as L,u as U,a7 as M,v as k,Y as B,l as y,y as i,cV as R,D as A,E as d,F as P,m as x,ab as F,p as b,s as H,G as O,H as $}from"./CH6JZAHr.js";(function(){try{var u=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},m=new Error().stack;m&&(u._sentryDebugIds=u._sentryDebugIds||{},u._sentryDebugIds[m]="5eecd275-50bd-4416-95a0-0cb794404335",u._sentryDebugIdIdentifier="sentry-dbid-5eecd275-50bd-4416-95a0-0cb794404335")}catch{}})();const K={key:0,class:"formkit-form"},q=C({__name:"InstallmentsSelect",props:{productUcode:{default:""},installmentsList:{default:null},disabled:{type:Boolean,default:!1},disabledTipCopy:{default:""},ignoreSplit:{type:Boolean,default:!1},checkoutContext:{}},emits:["update:modelValue","persistCardDetails"],setup(u,{emit:m}){const s=u,v=m,{t:I}=L(),N=U(),h=M(),r=k(),{SEND_USER_BEHAVIOR_EVENT_TYPE_SELECT_CARD_INSTALLMENT:_}=B(),E=y(!1),o=y(1),S=i(()=>s.disabled?I(s.disabledTipCopy):""),c=i(()=>h.getDefaultPaymentMethodDataOrHotmartInstallmentsSubPaymentMethod(s.productUcode)),n=i(()=>{var a;const e=(s==null?void 0:s.installmentsList)||((a=c.value)==null?void 0:a.installments)||[],{getFormatedInstallmentsList:t}=R({installments:e,productUcode:s.productUcode,t:I});return t()}),f=i(()=>{var e,t;return(e=n.value)!=null&&e.length&&((t=n.value[n.value.length-1])==null?void 0:t.number)||1}),D=i(()=>{var t,l,a;const{split:e}=N.query;return!s.ignoreSplit&&e&&T(Number(e))?Number(e):["BILLET","PIX"].includes(((t=c.value)==null?void 0:t.type)||"")&&n.value.length?f.value:((l=c.value)==null?void 0:l.type)==="CREDIT_CARD"&&n.value.length&&r.shouldShowMaxInstallments?r.selectedInstallmentNumber[s.productUcode||""]||f.value||1:(a=n.value[0])==null?void 0:a.value});A(()=>{r.SET_SELECTED_INSTALLMENT_NUMBER({selectedInstallment:null,ucode:s.productUcode})});function T(e){return n.value.find(({number:t})=>Number(t)===e)}function g(e){v("update:modelValue",Number(e)),v("persistCardDetails")}return d(o,(e,t)=>{r.SET_SELECTED_INSTALLMENT_NUMBER({selectedInstallment:Number(e),ucode:s.productUcode}),E.value&&_(Number(t),Number(e),s.checkoutContext)}),d(()=>s.disabled,()=>{var e;o.value=((e=n.value[0])==null?void 0:e.number)||1}),d(()=>s.installmentsList,()=>{var t,l;if(!((t=n.value)!=null&&t.length))return;const e=r.isDisplayingHotmartInstallmentsModal?f.value:((l=n.value[0])==null?void 0:l.number)||1;o.value=e},{immediate:!0}),d(c,e=>{var l,a;const t=(l=e==null?void 0:e.installments)==null?void 0:l.find(p=>p.number===Number(o.value));o.value=(t==null?void 0:t.number)||((a=e==null?void 0:e.installments)==null?void 0:a[0].number)||1}),d(D,e=>{o.value=e},{immediate:!0}),(e,t)=>{var a;const l=P("FormKit");return(a=b(n))!=null&&a.length?(H(),x("div",K,[O(l,{modelValue:b(o),"onUpdate:modelValue":t[0]||(t[0]=p=>$(o)?o.value=p:null),options:b(n),type:"select",placeholder:e.$t("installments.options"),label:e.$t("installments.options"),disabled:e.disabled,help:b(S),"data-testid":"installments-select",onInput:g,onClick:t[1]||(t[1]=p=>E.value=!0)},null,8,["modelValue","options","placeholder","label","disabled","help"])])):F("",!0)}}});export{q as _};
