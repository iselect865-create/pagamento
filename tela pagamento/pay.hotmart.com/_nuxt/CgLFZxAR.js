import{t as N,bm as Y,y as s,l as I,E as j,m as L,s as b,n as d,b4 as K,G as Q,aX as R,aO as G,a5 as V,ac as _,aj as Z,p as o,a8 as B,ab as w,bl as J,_ as q,a3 as O,I as tt,a7 as A,U as F,ak as X,aW as H,v as et,x as nt,cT as ot,bg as at,aZ as W,ap as st}from"./CH6JZAHr.js";import"./Bn4eBZ_a.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[t]="bf33a4b3-aee1-4a3d-8be5-d9bccb11c8d5",n._sentryDebugIdIdentifier="sentry-dbid-bf33a4b3-aee1-4a3d-8be5-d9bccb11c8d5")}catch{}})();const it={class:"_d-flex _position-relative _text-1"},rt=["id"],k=5,ct=N({__name:"Popover",props:{buttonLabel:{type:String,default:""},id:{type:String,required:!0},buttonIcon:{type:String,default:"question-circle"},iconSize:{type:String,default:"question-circle"},iconColor:{type:String,default:"var(--gray-500)"},position:{type:String,default:"right"},theme:{type:String,default:"dark"}},setup(n){var P,C;Y(a=>({"5656f713":o(v),"615c39f2":x}));const t=n,r=s(()=>({dark:{containerClass:"_bg-gray-800 _text-white _border _rounded _border-gray-800",afterColor:"var(--gray-800)"},light:{containerClass:"_bg-white _text-gray-500 _border _rounded _border-gray-300 _shadow-lg",afterColor:"var(--gray-300)"}})[t.theme]),v=s(()=>r.value.afterColor),x=`${k}px`,l=I(!1),u=I(null),i=I(null),m=I((P=u.value)==null?void 0:P.offsetHeight),p=I((C=u.value)==null?void 0:C.offsetWidth),T=s(()=>({top:{containerClasses:`${r.value.containerClass} position-top _mb-2`,containerStyles:`right: -${g(t.position)}px; bottom: ${h(t.position)}px`},right:{containerClasses:`${r.value.containerClass} position-right _ml-2`,containerStyles:`left: ${g(t.position)}px; bottom: -${h(t.position)}px`},bottom:{containerClasses:`${r.value.containerClass} position-bottom _mt-2`,containerStyles:`left: -${g(t.position)}px; top: ${h(t.position)}px`},left:{containerClasses:`${r.value.containerClass} position-left _mr-2`,containerStyles:`right: ${g(t.position)}px; bottom: -${h(t.position)}px`}})[t.position]);function g(a){return{top:()=>{var e;const c=((e=i.value)==null?void 0:e.offsetWidth)??0,f=p.value??0;return`${Math.round((c-f)/2)+k}`},right:()=>`${p.value??0}`,bottom:()=>{var e;const c=((e=i.value)==null?void 0:e.offsetWidth)??0,f=p.value??0;return`${Math.round((c-f)/2)-k}`},left:()=>`${p.value??0}`}[a]()}function h(a){return{top:()=>`${m.value??0}`,right:()=>{var e;const c=((e=i.value)==null?void 0:e.offsetHeight)??0,f=m.value??0;return`${Math.round((c-f)/2)-k}`},bottom:()=>`${m.value??0}`,left:()=>{var e;const c=((e=i.value)==null?void 0:e.offsetHeight)??0,f=m.value??0;return`${Math.round((c-f)/2)-k}`}}[a]()}function E(){l.value=!l.value}function D(a){var c;((c=u.value)==null?void 0:c.contains(a.target))||(l.value=!1)}async function M(){var a,y;await J(),m.value=(a=u.value)==null?void 0:a.offsetHeight,p.value=(y=u.value)==null?void 0:y.offsetWidth}return j(l,a=>{a?(M(),document.addEventListener("click",D)):document.removeEventListener("click",D)}),(a,y)=>{const c=G;return b(),L("div",it,[d("button",{id:n.id,ref_key:"popoverButton",ref:u,class:"hot-button _bg-white _border-0 _text-decoration-underline _text-blue-light _p-0 _text-1 outline-none",onClick:K(E,["prevent"])},[d("div",null,[Q(c,{name:n.buttonIcon,size:n.iconSize,class:V(n.buttonLabel?"_mr-1":""),fill:n.iconColor},null,8,["name","size","class","fill"]),R(" "+_(n.buttonLabel),1)])],8,rt),d("div",{ref_key:"popoverFloatingContainer",ref:i,class:V(["_position-absolute _rounded _px-3 _py-2 popover-floating-container",{_hidden:!o(l),[o(T).containerClasses]:!0}]),style:Z(o(T).containerStyles)},[o(l)?B(a.$slots,"header",{key:0},void 0,!0):w("",!0),o(l)?B(a.$slots,"body",{key:1},void 0,!0):w("",!0)],6)])}}}),lt=q(ct,[["__scopeId","data-v-027fb71a"]]),ut=N({__name:"TaxPopover",props:{taxLabel:{type:String,required:!0},infoMessage:{type:String,required:!0}},setup(n){return(t,r)=>{const v=lt;return b(),O(v,{id:`${n.taxLabel}-popover`,"button-label":n.taxLabel,"icon-size":"14","icon-color":"var(--blue-light)"},{body:tt(()=>[d("span",null,_(n.infoMessage),1)]),_:1},8,["id","button-label"])}}}),dt={key:0,class:"cart-summary-item _d-flex _justify-content-between _text-1 _text-gray _mb-2","data-testid":"ticket-quantity-unit-value"},mt={class:"_flex-1 _my-1 _mx-0 _p-0","data-testid":"cart-summary-ticket-quantity"},pt={class:"_d-flex _flex-wrap _flex-column _align-items-end"},_t={"data-testid":"cart-summary-ticket-unit-value"},ft=N({__name:"TicketQuantityUnitValue",props:{item:{}},setup(n){const t=n,{ucode:r}=A(),{locale:v,eventsOptions:x}=F(),l=s(()=>{var i;return(i=x[r])==null?void 0:i.lot.title}),u=s(()=>{const{unitValue:i,currency:m}=t.item;return i?X({locale:v,amount:{value:i,currency:m}}):null});return(i,m)=>o(l)?(b(),L("li",dt,[d("p",mt,[d("b",null,_(t.item.quantity)+"x",1),R(" "+_(o(l)),1)]),d("span",pt,[d("span",_t,_(o(u)),1),d("span",null,_(i.$t("summary.each_ticket")),1)])])):w("",!0)}}),yt=["data-test-id"],bt={key:0},vt=N({__name:"CartSummaryItem",props:{item:{},productUcode:{default:""}},setup(n){const t=n,r=A(),{product:v,isEvent:x}=r,{countryIsoCode:l,regionIsoCode:u,locale:i}=H(F()),{selectedInstallmentNumber:m}=H(et()),{t:p,te:T}=nt(),g=s(()=>!r.isSubscription(t.productUcode)||r.isSubscriptionEarlyRenewal(t.productUcode)),h=s(()=>{const{operation:e}=t.item;return["NONE"].includes(e)?null:ot[e]}),E=s(()=>x()&&t.item.type==="FULL_PRICE"&&t.item.quantity&&t.item.unitValue),D=s(()=>{var z;if(E.value)return null;const{currency:e,type:S}=t.item,$=m.value[t.productUcode],U=((z=t.item.installments)==null?void 0:z[$])||t.item.value;return S==="SHIPMENT"&&U<=0?p("shipment.free_shipping_price"):X({locale:i.value,amount:{value:U,currency:e}})}),M=s(()=>t.item.percent?`(${t.item.percent}%)`:""),P=s(()=>t.item.type.includes("TAX")),C=s(()=>{const e=t.item.type.includes("TAX_PROVINCIAL")?u==null?void 0:u.value:void 0,S=$=>at({translate:p,verifyTranslationKey:T,countryIsoCode:l.value,regionIsoCode:e,parentKey:"tax",label:$});return{taxLabel:S("summary.tax_label"),info:S("summary.info_message")}}),a=s(()=>({COUPON:"_text-green-dark",FULL_PRICE:"_font-weight-bold",TAX_FEDERAL:t.item.operation==="OMIT"?"omitted-item":"",TAX_PROVINCIAL:t.item.operation==="OMIT"?"omitted-item":"",SHIPMENT:""})),y=s(()=>a.value[t.item.type]??""),c=s(()=>a.value[t.item.type]??""),f=s(()=>{var e;return t.item.type===W.FULL_PRICE?((e=v(t.productUcode))==null?void 0:e.name)??"":t.item.type===W.COUPON&&r.isSubscriptionEarlyRenewal(t.productUcode)?p("earlyRenewal.coupon"):p(`summary.${t.item.type.toLowerCase()}`)});return(e,S)=>{const $=ut,U=ft;return b(),L(st,null,[d("li",{class:"cart-summary-item _d-flex _align-items-center _text-1 _mb-1","data-test-id":e.item.type},[o(P)?(b(),O($,{key:0,"tax-label":o(C).taxLabel,"info-message":o(C).info},null,8,["tax-label","info-message"])):(b(),L("p",{key:1,class:V(["_flex-1 _my-1 _mx-0 _p-0",o(y)])},[R(_(o(f))+" ",1),o(g)?(b(),L("span",bt,_(o(M)),1)):w("",!0)],2)),d("span",{class:V(["_ml-auto",o(c)]),"data-testid":"cart-summary-item-value"},_(o(h))+" "+_(o(D)),3)],8,yt),o(E)?(b(),O(U,{key:0,item:e.item},null,8,["item"])):w("",!0)],64)}}}),xt=q(vt,[["__scopeId","data-v-71628fcc"]]);export{xt as C};
