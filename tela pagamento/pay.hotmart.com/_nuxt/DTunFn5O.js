import{_ as d,m as n,s as h,ab as u,n as l,aj as f,a5 as m,cP as a,cQ as p,bM as _}from"./CH6JZAHr.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5802e5b2-04d4-4ed8-8ebb-2714369d53fe",e._sentryDebugIdIdentifier="sentry-dbid-5802e5b2-04d4-4ed8-8ebb-2714369d53fe")}catch{}})();const g={name:"CheckoutIframe",data:()=>({iframeHeight:"1048px",showLoading:!0,shouldRedirectInSameWindow:!1}),computed:{shouldShowIframeLoading(){return this.isCustomCheckout&&this.showLoading},isCustomCheckout(){return+(this._.provides[a]||this.$route).query.checkoutMode==10},isDefaultOrTransparentCheckout(){return+(this._.provides[a]||this.$route).query.checkoutMode!=10},isFunnel(){return(this._.provides[a]||this.$route).path==="/funnel"},isNextCheckout(){return _((this._.provides[a]||this.$route).path)},iframeURL(){let e=(this._.provides[a]||this.$route).fullPath;const t=this.$config.public.CHECKOUT_URL;if(this.isNextCheckout||(e=e.replace("/pay","")),this.isDefaultOrTransparentCheckout)return`${t}${e}`;const s=/(\w{1,12})(.+?(?=checkoutMode))?(checkoutMode=\d{1,2})?/.exec(e),r="checkoutMode=12";return s&&s[3]?e=e.replace(s[3],r):e=`${e}${p(e)}${r}`,`${t}${e}`},componentStyles(){return{height:this.iframeHeight}}},mounted(){this.EVBUS_INIT(this.$refs.checkoutIframe),this.EVBUS_ON_MESSAGE({evName:"DOCUMENT_HEIGHT_UPDATE",evHandler:this.setIframeHeight}),this.EVBUS_ON_MESSAGE({evName:"URL_REDIRECT",evHandler:this.updateTopUrl}),this.EVBUS_ON_MESSAGE({evName:"REDIRECT_IN_SAME_WINDOW",evHandler:this.setRedirectInSameWindow})},methods:{onIframeLoad(){this.showLoading=!1},setIframeHeight(e){const[t,s]=[e,this.iframeHeight].map(i=>Number.parseInt(i.split("px")[0]));Math.abs(t-s)>15&&(this.iframeHeight=e)},setRedirectInSameWindow(e){this.shouldRedirectInSameWindow=e},updateTopUrl(e){this.shouldRedirectInSameWindow?window.location.href=e:window.top.location.href=e}}},I={key:0,class:"loading"},k=["src"];function w(e,t,s,r,i,o){return h(),n("div",{class:m(["checkout-wrapper",{"checkout-wrapper--custom-checkout":o.isCustomCheckout,"checkout-wrapper--funnel":o.isFunnel}]),style:f(o.componentStyles)},[o.shouldShowIframeLoading?(h(),n("div",I)):u("",!0),l("iframe",{id:"hotmart-checkout-iframe",ref:"checkoutIframe",class:"hotmart-checkout-iframe",src:o.iframeURL,allowfullscreen:"",title:"Hotmart Checkout",allow:"payment; fullscreen",allowpaymentrequest:"true",onLoad:t[0]||(t[0]=(...c)=>o.onIframeLoad&&o.onIframeLoad(...c))},null,40,k)],6)}const S=d(g,[["render",w],["__scopeId","data-v-c528ca49"]]);export{S as _};
